<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图书上传与阅读系统</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3b82f6',
                        secondary: '#1e40af',
                        accent: '#bfdbfe',
                        dark: '#0f172a',
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .transition-transform-opacity {
                transition-property: transform, opacity;
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
    <!-- 导航栏 -->
    <nav id="main-nav" class="bg-white shadow-md fixed w-full z-50 transition-all duration-300">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fa fa-book text-primary text-2xl"></i>
                <h1 class="text-xl font-bold text-dark">图书宝库</h1>
            </div>
            <div class="hidden md:flex items-center space-x-6">
                <a href="#upload" class="text-gray-700 hover:text-primary transition-colors">上传图书</a>
                <a href="#library" class="text-gray-700 hover:text-primary transition-colors">我的图书馆</a>
                <button id="logout-btn" class="hidden px-4 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors">
                    退出阅读
                </button>
            </div>
            <button id="mobile-menu-btn" class="md:hidden text-gray-700">
                <i class="fa fa-bars text-xl"></i>
            </button>
        </div>
        <!-- 移动端菜单 -->
        <div id="mobile-menu" class="md:hidden hidden bg-white shadow-lg absolute w-full">
            <div class="container mx-auto px-4 py-3 flex flex-col space-y-3">
                <a href="#upload" class="text-gray-700 hover:text-primary transition-colors py-2">上传图书</a>
                <a href="#library" class="text-gray-700 hover:text-primary transition-colors py-2">我的图书馆</a>
                <button id="mobile-logout-btn" class="hidden px-4 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors">
                    退出阅读
                </button>
            </div>
        </div>
    </nav>

    <!-- 英雄区域 -->
    <section class="pt-24 pb-16 bg-gradient-to-br from-primary/90 to-secondary text-white">
        <div class="container mx-auto px-4">
            <div class="max-w-3xl mx-auto text-center">
                <h2 class="text-[clamp(2rem,5vw,3.5rem)] font-bold mb-6 text-shadow">
                    您的私人数字图书馆
                </h2>
                <p class="text-lg md:text-xl mb-8 opacity-90">
                    上传、管理、阅读和下载您的电子图书，享受沉浸式阅读体验
                </p>
                <div class="flex flex-col sm:flex-row justify-center gap-4">
                    <a href="#upload" class="px-6 py-3 bg-white text-primary font-semibold rounded-lg hover:bg-gray-100 transition-all transform hover:scale-105 shadow-lg">
                        上传图书
                    </a>
                    <a href="#library" class="px-6 py-3 bg-transparent border-2 border-white text-white font-semibold rounded-lg hover:bg-white/10 transition-all transform hover:scale-105">
                        浏览图书馆
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- 主内容区域 -->
    <main class="flex-grow container mx-auto px-4 py-12">
        <!-- 登录区域 -->
        <section id="login-section" class="max-w-md mx-auto mb-16">
            <div class="bg-white rounded-xl shadow-lg p-8 transform transition-all duration-500 hover:shadow-xl">
                <div class="text-center mb-6">
                    <i class="fa fa-lock text-primary text-4xl mb-3"></i>
                    <h2 class="text-2xl font-bold text-dark">访问图书馆</h2>
                    <p class="text-gray-600">请输入密码解锁您的图书库</p>
                </div>
                <form id="login-form" class="space-y-4">
                    <div>
                        <label for="password" class="block text-sm font-medium text-gray-700 mb-1">密码</label>
                        <div class="relative">
                            <input type="password" id="password" name="password" placeholder="输入访问密码" 
                                class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all outline-none"
                                required>
                            <button type="button" id="toggle-password" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600">
                                <i class="fa fa-eye-slash"></i>
                            </button>
                        </div>
                    </div>
                    <div class="pt-2">
                        <button type="submit" class="w-full bg-primary hover:bg-secondary text-white font-medium py-3 px-4 rounded-lg transition-colors duration-300 flex items-center justify-center">
                            <span>登录图书馆</span>
                            <i class="fa fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </form>
            </div>
        </section>

        <!-- 上传区域 -->
        <section id="upload" class="hidden mb-16">
            <div class="bg-white rounded-xl shadow-lg p-8 transform transition-all duration-500 hover:shadow-xl">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold text-dark">上传新图书</h2>
                    <div class="flex space-x-2">
                        <button id="upload-help-btn" class="text-gray-500 hover:text-primary transition-colors">
                            <i class="fa fa-question-circle"></i>
                        </button>
                    </div>
                </div>
                
                <form id="upload-form" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="book-title" class="block text-sm font-medium text-gray-700 mb-1">书名</label>
                            <input type="text" id="book-title" name="title" placeholder="输入书名" 
                                class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all outline-none"
                                required>
                        </div>
                        <div>
                            <label for="book-author" class="block text-sm font-medium text-gray-700 mb-1">作者</label>
                            <input type="text" id="book-author" name="author" placeholder="输入作者" 
                                class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all outline-none"
                                required>
                        </div>
                        <div>
                            <label for="book-category" class="block text-sm font-medium text-gray-700 mb-1">分类</label>
                            <select id="book-category" name="category" 
                                class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all outline-none">
                                <option value="文学">文学</option>
                                <option value="科学">科学</option>
                                <option value="技术">技术</option>
                                <option value="历史">历史</option>
                                <option value="哲学">哲学</option>
                                <option value="艺术">艺术</option>
                                <option value="其他">其他</option>
                            </select>
                        </div>
                        <div>
                            <label for="book-year" class="block text-sm font-medium text-gray-700 mb-1">出版年份</label>
                            <input type="number" id="book-year" name="year" placeholder="输入出版年份" 
                                class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all outline-none">
                        </div>
                    </div>
                    
                    <div>
                        <label for="book-description" class="block text-sm font-medium text-gray-700 mb-1">简介</label>
                        <textarea id="book-description" name="description" rows="3" placeholder="输入图书简介" 
                            class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all outline-none"></textarea>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">选择电子书文件</label>
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-primary transition-colors cursor-pointer">
                            <input type="file" id="book-file" name="file" accept=".pdf,.epub,.mobi,.txt" class="hidden">
                            <div id="file-drop-area">
                                <i class="fa fa-cloud-upload text-gray-400 text-4xl mb-3"></i>
                                <p class="text-gray-600 mb-1">拖放电子书文件到此处，或</p>
                                <button type="button" id="select-file-btn" class="text-primary hover:text-secondary font-medium">
                                    浏览文件
                                </button>
                                <p class="text-xs text-gray-500 mt-2">支持 PDF, EPUB, MOBI, TXT 格式</p>
                            </div>
                            <div id="file-preview" class="hidden mt-4">
                                <div class="flex items-center justify-between bg-gray-50 p-3 rounded-lg">
                                    <div class="flex items-center">
                                        <i id="file-icon" class="fa fa-file-pdf-o text-primary mr-3 text-xl"></i>
                                        <div>
                                            <p id="file-name" class="font-medium text-gray-800"></p>
                                            <p id="file-size" class="text-xs text-gray-500"></p>
                                        </div>
                                    </div>
                                    <button type="button" id="remove-file-btn" class="text-gray-400 hover:text-red-500">
                                        <i class="fa fa-times"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="pt-2">
                        <button type="submit" id="submit-upload-btn" class="w-full bg-primary hover:bg-secondary text-white font-medium py-3 px-4 rounded-lg transition-colors duration-300 flex items-center justify-center opacity-70 cursor-not-allowed" disabled>
                            <i class="fa fa-upload mr-2"></i>
                            <span>上传图书</span>
                        </button>
                    </div>
                </form>
            </div>
        </section>

        <!-- 图书馆区域 -->
        <section id="library" class="hidden">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                <h2 class="text-2xl font-bold text-dark mb-4 md:mb-0">我的图书馆</h2>
                <div class="flex flex-col sm:flex-row gap-3 w-full md:w-auto">
                    <div class="relative">
                        <input type="text" id="search-books" placeholder="搜索图书..." 
                            class="w-full sm:w-64 px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all outline-none">
                        <i class="fa fa-search absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                    </div>
                    <div class="flex gap-2">
                        <button id="sort-books" class="px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center">
                            <i class="fa fa-sort mr-2"></i>
                            <span>排序</span>
                        </button>
                        <button id="filter-books" class="px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center">
                            <i class="fa fa-filter mr-2"></i>
                            <span>筛选</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- 空图书馆状态 -->
            <div id="empty-library" class="hidden text-center py-12">
                <div class="bg-white rounded-xl shadow-lg p-8 max-w-md mx-auto transform transition-all duration-500 hover:shadow-xl">
                    <i class="fa fa-book text-gray-300 text-6xl mb-4"></i>
                    <h3 class="text-xl font-bold text-gray-700 mb-2">您的图书馆是空的</h3>
                    <p class="text-gray-500 mb-6">上传您的第一本电子书，开始建立您的数字图书馆</p>
                    <a href="#upload" class="inline-block px-6 py-3 bg-primary text-white font-semibold rounded-lg hover:bg-secondary transition-colors transform hover:scale-105">
                        上传第一本图书
                    </a>
                </div>
            </div>
            
            <!-- 图书网格 -->
            <div id="books-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                <!-- 图书卡片会通过 JavaScript 动态添加 -->
            </div>
            
            <!-- 加载更多 -->
            <div id="load-more" class="text-center mt-10">
                <button class="px-6 py-3 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center mx-auto">
                    <i class="fa fa-refresh mr-2"></i>
                    <span>加载更多</span>
                </button>
            </div>
        </section>

        <!-- 阅读器区域 -->
        <section id="reader" class="hidden min-h-[80vh] flex flex-col">
            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center">
                    <div class="flex items-center mb-4 md:mb-0">
                        <button id="close-reader" class="text-gray-500 hover:text-gray-700 mr-4">
                            <i class="fa fa-arrow-left text-xl"></i>
                        </button>
                        <div>
                            <h2 id="reader-title" class="text-xl font-bold text-dark"></h2>
                            <p id="reader-author" class="text-gray-600"></p>
                        </div>
                    </div>
                    <div class="flex space-x-3">
                        <button id="font-size-decrease" class="p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                            <i class="fa fa-font text-sm"></i>
                        </button>
                        <button id="font-size-increase" class="p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                            <i class="fa fa-font text-lg"></i>
                        </button>
                        <button id="toggle-theme" class="p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                            <i class="fa fa-moon-o"></i>
                        </button>
                        <button id="bookmark-page" class="p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                            <i class="fa fa-bookmark-o"></i>
                        </button>
                        <button id="download-book" class="p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors" onclick="downloadCurrentBook()">
                            <i class="fa fa-download"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="flex-grow bg-white rounded-xl shadow-lg overflow-hidden flex flex-col md:flex-row">
                <!-- 侧边栏 -->
                <div id="reader-sidebar" class="w-full md:w-64 bg-gray-50 border-r border-gray-200 overflow-y-auto">
                    <div class="p-4 border-b border-gray-200">
                        <div class="relative">
                            <input type="text" placeholder="搜索目录..." 
                                class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all outline-none text-sm">
                            <i class="fa fa-search absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm"></i>
                        </div>
                    </div>
                    <div class="p-4">
                        <h3 class="font-medium text-gray-700 mb-2">目录</h3>
                        <ul id="table-of-contents" class="space-y-1 text-sm">
                            <!-- 目录会通过 JavaScript 动态添加 -->
                        </ul>
                    </div>
                </div>
                
                <!-- 阅读区域 -->
                <div id="reader-content" class="flex-grow p-6 md:p-10 overflow-y-auto bg-white" style="font-size: 16px;">
                    <div id="book-content" class="prose max-w-none">
                        <!-- 图书内容会通过 JavaScript 动态添加 -->
                    </div>
                </div>
            </div>
            
            <!-- 阅读器底部控制栏 -->
            <div class="mt-6 bg-white rounded-xl shadow-lg p-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <button id="prev-page" class="p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                            <i class="fa fa-chevron-left"></i>
                        </button>
                        <span id="page-info" class="text-sm text-gray-600">第 1 页，共 100 页</span>
                        <button id="next-page" class="p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                            <i class="fa fa-chevron-right"></i>
                        </button>
                    </div>
                    <div class="flex items-center">
                        <input type="range" id="page-slider" min="1" max="100" value="1" 
                            class="w-48 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                    </div>
                    <div class="flex items-center space-x-4">
                        <button id="go-to-bookmark" class="p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                            <i class="fa fa-bookmark"></i>
                        </button>
                        <button id="toggle-sidebar" class="p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                            <i class="fa fa-bars"></i>
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- 页脚 -->
    <footer class="bg-dark text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center space-x-2 mb-4">
                        <i class="fa fa-book text-primary text-2xl"></i>
                        <h3 class="text-xl font-bold">图书宝库</h3>
                    </div>
                    <p class="text-gray-400 mb-4">您的私人数字图书馆，安全存储、便捷阅读和下载您的所有电子图书。</p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fa fa-facebook"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fa fa-twitter"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fa fa-instagram"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fa fa-github"></i>
                        </a>
                    </div>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">快速链接</h4>
                    <ul class="space-y-2">
                        <li><a href="#upload" class="text-gray-400 hover:text-white transition-colors">上传图书</a></li>
                        <li><a href="#library" class="text-gray-400 hover:text-white transition-colors">我的图书馆</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-colors">使用帮助</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-colors">隐私政策</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">联系我们</h4>
                    <ul class="space-y-2">
                        <li class="flex items-start">
                            <i class="fa fa-envelope-o text-primary mt-1 mr-2"></i>
                            <span class="text-gray-400">support@booktreasure.com</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fa fa-phone text-primary mt-1 mr-2"></i>
                            <span class="text-gray-400">+86 123 4567 8910</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fa fa-map-marker text-primary mt-1 mr-2"></i>
                            <span class="text-gray-400">北京市海淀区中关村南大街5号</span>
                        </li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">订阅更新</h4>
                    <p class="text-gray-400 mb-4">订阅我们的通讯，获取最新功能和更新信息。</p>
                    <form class="space-y-2">
                        <input type="email" placeholder="您的邮箱地址" 
                            class="w-full px-4 py-2 rounded-lg bg-gray-800 border border-gray-700 text-white placeholder-gray-500 focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all outline-none">
                        <button type="submit" class="w-full bg-primary hover:bg-secondary text-white font-medium py-2 px-4 rounded-lg transition-colors">
                            订阅
                        </button>
                    </form>
                </div>
            </div>
            <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-500">
                <p>&copy; 2025 图书宝库. 保留所有权利.</p>
            </div>
        </div>
    </footer>

    <!-- 模态框 -->
    <div id="modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl shadow-xl max-w-md w-full mx-4 transform transition-all duration-300 scale-95 opacity-0" id="modal-content">
            <div class="p-6">
                <div class="flex justify-between items-start mb-4">
                    <h3 id="modal-title" class="text-xl font-bold text-dark"></h3>
                    <button id="close-modal" class="text-gray-400 hover:text-gray-600">
                        <i class="fa fa-times"></i>
                    </button>
                </div>
                <div id="modal-body" class="mb-6"></div>
                <div class="flex justify-end space-x-3">
                    <button id="modal-cancel-btn" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                        取消
                    </button>
                    <button id="modal-confirm-btn" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors">
                        确认
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 通知提示 -->
    <div id="notification" class="fixed top-4 right-4 max-w-xs w-full bg-white rounded-lg shadow-lg p-4 transform translate-x-full transition-transform duration-300 flex items-start z-50">
        <div id="notification-icon" class="mr-3 text-xl"></div>
        <div class="flex-grow">
            <h4 id="notification-title" class="font-medium text-gray-800"></h4>
            <p id="notification-message" class="text-sm text-gray-600"></p>
        </div>
        <button id="close-notification" class="text-gray-400 hover:text-gray-600 ml-2">
            <i class="fa fa-times"></i>
        </button>
    </div>

    <script>
        // 应用状态管理
        const appState = {
            isLoggedIn: false,
            currentBook: null,
            currentPage: 1,
            totalPages: 100,
            fontSize: 16,
            darkMode: false,
            books: [
                // 示例图书数据
                {
                    id: 1,
                    title: "Python 数据分析实战",
                    author: "张三",
                    category: "技术",
                    year: 2023,
                    description: "本书全面介绍了Python在数据分析领域的应用，从基础到高级技巧，适合数据科学爱好者阅读。",
                    file: "python_data_analysis.pdf",
                    fileType: "pdf",
                    cover: "https://picsum.photos/seed/python/200/300",
                    uploadDate: "2023-06-15",
                    bookmarks: [10, 25, 45]
                },
                {
                    id: 2,
                    title: "人类简史",
                    author: "尤瓦尔·赫拉利",
                    category: "历史",
                    year: 2014,
                    description: "从认知革命、农业革命到科学革命，本书讲述了人类如何从一个普通的非洲灵长类动物，演变为地球的主宰。",
                    file: "brief_history_of_humankind.epub",
                    fileType: "epub",
                    cover: "https://picsum.photos/seed/history/200/300",
                    uploadDate: "2023-05-22",
                    bookmarks: [5, 18, 32]
                },
                {
                    id: 3,
                    title: "活着",
                    author: "余华",
                    category: "文学",
                    year: 1992,
                    description: "讲述了在大时代背景下，主人公福贵的人生和家庭不断经受着苦难，到了最后，所有亲人都先后离他而去，仅剩下年老的他和一头老牛相依为命。",
                    file: "to_live.txt",
                    fileType: "txt",
                    cover: "https://picsum.photos/seed/live/200/300",
                    uploadDate: "2023-04-10",
                    bookmarks: [8, 22, 37]
                },
                {
                    id: 4,
                    title: "时间简史",
                    author: "史蒂芬·霍金",
                    category: "科学",
                    year: 1988,
                    description: "这本书自1988年首版以来，被翻译成40种文字，累计销售量突破2500万册，是畅销全世界的科学著作。",
                    file: "a_brief_history_of_time.mobi",
                    fileType: "mobi",
                    cover: "https://picsum.photos/seed/time/200/300",
                    uploadDate: "2023-03-18",
                    bookmarks: [12, 29, 41]
                }
            ],
            // 模拟图书内容数据
            bookContents: {
                1: `
                    <h1>Python 数据分析实战</h1>
                    <p class="lead">数据科学与人工智能时代的必备技能</p>
                    
                    <h2>第1章 数据分析简介</h2>
                    <p>数据分析是指用适当的统计分析方法对收集来的大量数据进行分析，将它们加以汇总和理解并消化，以求最大化地开发数据的功能，发挥数据的作用。数据分析是为了提取有用信息和形成结论而对数据加以详细研究和概括总结的过程。</p>
                    
                    <h3>1.1 数据分析的重要性</h3>
                    <p>在当今数字化时代，数据已经成为企业和组织最重要的资产之一。通过数据分析，我们可以：</p>
                    <ul>
                        <li>发现业务趋势和模式</li>
                        <li>做出基于数据的决策</li>
                        <li>优化业务流程</li>
                        <li>提高效率和生产力</li>
                        <li>预测未来趋势</li>
                    </ul>
                    
                    <h3>1.2 数据分析的应用领域</h3>
                    <p>数据分析在各个领域都有广泛的应用：</p>
                    <ul>
                        <li>金融：风险评估、市场分析、投资决策</li>
                        <li>医疗：疾病预测、治疗效果分析、药物研发</li>
                        <li>零售：客户细分、推荐系统、库存管理</li>
                        <li>交通：路线优化、拥堵预测、自动驾驶</li>
                        <li>教育：学习行为分析、个性化教育</li>
                    </ul>
                    
                    <h2>第2章 Python 数据分析基础</h2>
                    <p>Python是一种功能强大、易于学习的编程语言，特别适合数据分析。Python拥有丰富的数据分析库，如NumPy、Pandas、Matplotlib等，可以帮助我们高效地处理和分析数据。</p>
                    
                    <h3>2.1 Python 环境搭建</h3>
                    <p>在开始使用Python进行数据分析之前，我们需要搭建一个合适的开发环境。以下是几种常见的Python环境搭建方法：</p>
                    
                    <h4>2.1.1 Anaconda</h4>
                    <p>Anaconda是一个用于科学计算的Python发行版，包含了Python和许多常用的科学计算库。安装Anaconda是搭建Python数据分析环境的最简单方法。</p>
                    
                    <p>你可以从Anaconda官方网站下载适合你操作系统的安装包，然后按照安装向导进行安装。</p>
                    
                    <h4>2.1.2 pip</h4>
                    <p>如果你已经安装了Python，也可以使用pip（Python包管理器）来安装所需的库。例如，安装NumPy和Pandas可以使用以下命令：</p>
                    
                    <pre><code>pip install numpy pandas matplotlib</code></pre>
                    
                    <h3>2.2 Python 基础语法</h3>
                    <p>Python的语法简洁明了，易于学习。以下是一些Python的基础语法：</p>
                    
                    <h4>2.2.1 变量和数据类型</h4>
                    <p>Python是一种动态类型语言，不需要预先声明变量的类型。例如：</p>
                    
                    <pre><code>x = 10
y = "Hello, World!"
z = [1, 2, 3, 4, 5]</code></pre>
                    
                    <p>Python支持多种数据类型，包括整数、浮点数、字符串、列表、元组、字典等。</p>
                `,
                2: `
                    <h1>人类简史</h1>
                    <p class="lead">从动物到上帝的演化历程</p>
                    
                    <h2>认知革命</h2>
                    <p>大约7万年前，现代人类的祖先智人发生了一次重大的认知革命，这次革命使智人拥有了虚构故事的能力，从而形成了文化、宗教和社会结构。</p>
                    
                    <h3>虚构故事的力量</h3>
                    <p>智人能够创造和相信虚构的故事，如神话、宗教和国家等。这些虚构的故事使智人能够大规模合作，形成庞大的社会群体。</p>
                    
                    <p>例如，基督教的教义、美国的《独立宣言》和公司的章程都是虚构的故事，但它们能够让成千上万的人共同合作，实现共同的目标。</p>
                    
                    <h3>语言的独特性</h3>
                    <p>智人的语言不仅仅是简单的沟通工具，更是一种能够表达抽象概念的工具。智人能够讨论虚构的事物，如上帝、国家和人权等，这是其他动物所不具备的能力。</p>
                    
                    <h2>农业革命</h2>
                    <p>大约1万年前，人类从狩猎采集社会转向农业社会，这被称为农业革命。农业革命使人类能够生产更多的食物，从而支持更大规模的人口增长和定居生活。</p>
                    
                    <h3>农业的起源</h3>
                    <p>农业革命并不是突然发生的，而是一个渐进的过程。人类开始尝试种植植物和驯养动物，逐渐从狩猎采集转向农业生产。</p>
                    
                    <p>最早的农业中心出现在中东的新月沃地、中国的黄河流域和长江流域、中美洲的墨西哥等地。</p>
                    
                    <h3>农业革命的影响</h3>
                    <p>农业革命对人类社会产生了深远的影响：</p>
                    <ul>
                        <li>人口增长：农业生产能够提供更多的食物，支持更大规模的人口增长。</li>
                        <li>定居生活：农业生产需要定居，人类开始建造永久的住所和村庄。</li>
                        <li>社会分化：农业生产导致了财富和权力的不平等，社会开始分化为不同的阶层。</li>
                        <li>技术进步：为了提高农业生产效率，人类发明了许多新技术，如犁、灌溉系统等。</li>
                    </ul>
                `,
                3: `
                    <h1>活着</h1>
                    <p class="lead">在苦难中寻找生命的意义</p>
                    
                    <p>我比现在年轻十岁的时候，获得了一个游手好闲的职业，去乡间收集民间歌谣。那时候我是一个年轻人，心地善良，身体健壮，有一头浓密的黑发。我沿着乡间小道，走过一个又一个村庄，听老人们讲述他们的故事，收集那些流传了几百年的歌谣。</p>
                    
                    <p>有一天，我来到了一个叫做徐家汇的村庄。这个村庄坐落在一片平原上，周围是一片片稻田和麦田。村庄里有一条小河，河水清澈见底，河岸边种着一排柳树。我走进村庄，看到了一个老人，他坐在一棵老槐树下，正在晒太阳。我走上前去，向他问好，并问他是否知道一些古老的歌谣。</p>
                    
                    <p>老人看了看我，笑了笑，说："我知道很多歌谣，但是我现在不想唱。我想给你讲一个故事，一个关于活着的故事。"</p>
                    
                    <p>我点了点头，坐在老人旁边，听他讲述这个故事。老人的声音低沉而缓慢，仿佛每一个字都经过了深思熟虑。他讲述了一个叫做福贵的人的故事，一个经历了无数苦难却依然坚强地活着的人的故事。</p>
                    
                    <h2>第一章 纨绔子弟</h2>
                    <p>福贵出生在一个富贵人家，他的父亲是一个大地主，拥有很多土地和财产。福贵从小就过着衣食无忧的生活，他不喜欢读书，整天和一些纨绔子弟混在一起，喝酒、赌博、逛妓院。</p>
                    
                    <p>福贵的父亲对他非常失望，但又无可奈何。他希望福贵能够改邪归正，继承他的家业，但福贵却置若罔闻。终于，在福贵二十岁的时候，他的父亲因为过度劳累和忧虑而去世了。</p>
                    
                    <p>父亲的去世并没有让福贵感到悲伤，反而让他感到自由。他开始更加放纵自己，每天都在外面花天酒地，赌博输了很多钱。很快，他就把父亲留下的家业输得精光，只剩下了一所房子和几亩地。</p>
                    
                    <h2>第二章 沦为佃农</h2>
                    <p>福贵输光了家产，不得不卖掉房子和土地，搬到了乡下。他和妻子家珍、女儿凤霞、儿子有庆一起生活，靠租种别人的土地为生。从一个大地主的儿子沦为一个佃农，福贵的生活发生了翻天覆地的变化。</p>
                    
                    <p>刚开始的时候，福贵非常不适应这种艰苦的生活。他从来没有干过农活，不知道如何耕种土地。但是，为了生存，他不得不努力学习。在妻子家珍的帮助下，福贵逐渐掌握了农业生产的技能，生活也逐渐稳定下来。</p>
                    
                    <p>然而，命运并没有眷顾福贵。在他的女儿凤霞四岁的时候，一场高烧让她变成了聋哑人。福贵和家珍非常伤心，但他们并没有放弃，而是更加努力地工作，希望能够给孩子们一个更好的生活。</p>
                `,
                4: `
                    <h1>时间简史</h1>
                    <p class="lead">从大爆炸到黑洞的宇宙之旅</p>
                    
                    <h2>第一章 我们的宇宙图像</h2>
                    <p>在过去的几个世纪里，我们对宇宙的认识发生了翻天覆地的变化。从亚里士多德和托勒密的地心说，到哥白尼和伽利略的日心说，再到牛顿的万有引力定律和爱因斯坦的相对论，我们对宇宙的理解越来越深入。</p>
                    
                    <h3>地心说与日心说</h3>
                    <p>在古代，人们认为地球是宇宙的中心，所有的天体都围绕地球旋转。这一观点被称为地心说，由古希腊哲学家亚里士多德和天文学家托勒密提出，并在中世纪被广泛接受。</p>
                    
                    <p>直到16世纪，哥白尼提出了日心说，认为太阳是宇宙的中心，地球和其他行星围绕太阳旋转。这一观点遭到了当时教会的强烈反对，但随着伽利略发明了望远镜，观测到了木星的卫星和金星的相位变化，日心说逐渐被人们接受。</p>
                    
                    <h3>万有引力定律</h3>
                    <p>17世纪，牛顿发现了万有引力定律，解释了行星围绕太阳运行的原因。万有引力定律表明，任何两个物体之间都存在引力，引力的大小与物体的质量成正比，与物体之间的距离的平方成反比。</p>
                    
                    <p>牛顿的万有引力定律不仅解释了行星的运动，还预测了彗星的轨道和潮汐现象，成为了经典力学的基石。</p>
                    
                    <h3>相对论</h3>
                    <p>20世纪初，爱因斯坦提出了相对论，包括狭义相对论和广义相对论。狭义相对论主要研究物体在高速运动时的行为，而广义相对论则研究引力和时空的弯曲。</p>
                    
                    <p>广义相对论预言了黑洞的存在、引力波的存在以及宇宙膨胀的现象。这些预言后来都被观测所证实，成为了现代宇宙学的基础。</p>
                    
                    <h2>第二章 空间和时间</h2>
                    <p>空间和时间是我们理解宇宙的基本概念。在牛顿的经典力学中，空间和时间是绝对的，与物体的运动无关。而在爱因斯坦的相对论中，空间和时间是相对的，与物体的运动和引力场有关。</p>
                    
                    <h3>绝对时空观</h3>
                    <p>在牛顿的经典力学中，空间和时间被认为是绝对的。空间是一个三维的容器，物体在其中运动；时间是一个独立的维度，均匀地流逝，与物体的运动无关。</p>
                    
                    <p>牛顿的绝对时空观在日常生活中非常直观，也能够很好地解释大多数物理现象。但是，随着科学的发展，人们发现牛顿的绝对时空观在高速运动和强引力场的情况下不再适用。</p>
                    
                    <h3>相对时空观</h3>
                    <p>爱因斯坦的相对论提出了相对时空观。在狭义相对论中，爱因斯坦指出，时间和空间不是独立的，而是相互关联的，形成了一个四维的时空连续体。物体的运动状态会影响时间和空间的测量，这就是所谓的时间膨胀和长度收缩效应。</p>
                    
                    <p>在广义相对论中，爱因斯坦进一步指出，引力并不是一种力，而是时空的弯曲。质量和能量会使时空发生弯曲，物体在弯曲的时空中运动就像在引力场中运动一样。</p>
                `
            }
        };

        // DOM 加载完成后初始化应用
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化页面
            initPage();
            
            // 绑定事件处理函数
            bindEvents();
        });

        // 初始化页面
        function initPage() {
            // 检查用户是否已登录
            if (appState.isLoggedIn) {
                showSection('library');
                renderBooks();
            } else {
                showSection('login-section');
            }
        }

        // 绑定事件处理函数
        function bindEvents() {
            // 登录表单提交
            document.getElementById('login-form').addEventListener('submit', function(e) {
                e.preventDefault();
                // 验证密码（示例中使用固定密码 "123456"）
                const password = document.getElementById('password').value;
                if (password === '123456') {
                    appState.isLoggedIn = true;
                    showSection('library');
                    renderBooks();
                    showNotification('success', '登录成功', '欢迎回来，您的图书库已解锁');
                } else {
                    showNotification('error', '登录失败', '密码不正确，请重试');
                }
            });

            // 密码显示/隐藏切换
            document.getElementById('toggle-password').addEventListener('click', function() {
                const passwordInput = document.getElementById('password');
                const icon = this.querySelector('i');
                
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    icon.classList.remove('fa-eye-slash');
                    icon.classList.add('fa-eye');
                } else {
                    passwordInput.type = 'password';
                    icon.classList.remove('fa-eye');
                    icon.classList.add('fa-eye-slash');
                }
            });

            // 移动端菜单切换
            document.getElementById('mobile-menu-btn').addEventListener('click', function() {
                const mobileMenu = document.getElementById('mobile-menu');
                mobileMenu.classList.toggle('hidden');
            });

            // 导航链接点击
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    
                    const target = this.getAttribute('href');
                    if (target === '#upload' || target === '#library') {
                        if (appState.isLoggedIn) {
                            showSection(target.substring(1));
                        } else {
                            showSection('login-section');
                            showNotification('info', '需要登录', '请先登录以访问您的图书馆');
                        }
                    }
                    
                    // 关闭移动端菜单
                    document.getElementById('mobile-menu').classList.add('hidden');
                });
            });

            // 退出阅读按钮点击
            document.getElementById('logout-btn').addEventListener('click', function() {
                appState.isLoggedIn = false;
                showSection('login-section');
                showNotification('info', '已退出', '您已成功退出阅读模式');
            });

            // 移动端退出阅读按钮点击
            document.getElementById('mobile-logout-btn').addEventListener('click', function() {
                appState.isLoggedIn = false;
                showSection('login-section');
                document.getElementById('mobile-menu').classList.add('hidden');
                showNotification('info', '已退出', '您已成功退出阅读模式');
            });

            // 文件选择按钮点击
            document.getElementById('select-file-btn').addEventListener('click', function() {
                document.getElementById('book-file').click();
            });

            // 文件选择变化
            document.getElementById('book-file').addEventListener('change', function() {
                if (this.files && this.files[0]) {
                    const file = this.files[0];
                    const fileName = file.name;
                    const fileSize = formatFileSize(file.size);
                    const fileExt = fileName.split('.').pop().toLowerCase();
                    
                    // 更新文件预览
                    document.getElementById('file-name').textContent = fileName;
                    document.getElementById('file-size').textContent = fileSize;
                    
                    // 设置文件图标
                    const fileIcon = document.getElementById('file-icon');
                    fileIcon.className = 'fa mr-3 text-xl';
                    
                    switch (fileExt) {
                        case 'pdf':
                            fileIcon.classList.add('fa-file-pdf-o', 'text-red-500');
                            break;
                        case 'epub':
                            fileIcon.classList.add('fa-file-text-o', 'text-blue-500');
                            break;
                        case 'mobi':
                            fileIcon.classList.add('fa-file-book-o', 'text-green-500');
                            break;
                        case 'txt':
                            fileIcon.classList.add('fa-file-text-o', 'text-gray-500');
                            break;
                        default:
                            fileIcon.classList.add('fa-file-o', 'text-gray-500');
                    }
                    
                    // 显示文件预览，隐藏上传区域
                    document.getElementById('file-drop-area').classList.add('hidden');
                    document.getElementById('file-preview').classList.remove('hidden');
                    
                    // 启用上传按钮
                    document.getElementById('submit-upload-btn').disabled = false;
                    document.getElementById('submit-upload-btn').classList.remove('opacity-70', 'cursor-not-allowed');
                }
            });

            // 移除文件按钮点击
            document.getElementById('remove-file-btn').addEventListener('click', function() {
