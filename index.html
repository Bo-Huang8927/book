<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图书上传与阅读系统</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3b82f6',
                        secondary: '#1e40af',
                        accent: '#bfdbfe',
                        dark: '#0f172a',
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .transition-transform-opacity {
                transition-property: transform, opacity;
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
    <!-- 导航栏 -->
    <nav id="main-nav" class="bg-white shadow-md fixed w-full z-50 transition-all duration-300">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fa fa-book text-primary text-2xl"></i>
                <h1 class="text-xl font-bold text-dark">图书宝库</h1>
            </div>
            <div class="hidden md:flex items-center space-x-6">
                <a href="#upload" class="text-gray-700 hover:text-primary transition-colors">上传图书</a>
                <a href="#library" class="text-gray-700 hover:text-primary transition-colors">我的图书馆</a>
                <button id="logout-btn" class="hidden px-4 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors">
                    退出阅读
                </button>
            </div>
            <button id="mobile-menu-btn" class="md:hidden text-gray-700">
                <i class="fa fa-bars text-xl"></i>
            </button>
        </div>
        <!-- 移动端菜单 -->
        <div id="mobile-menu" class="md:hidden hidden bg-white shadow-lg absolute w-full">
            <div class="container mx-auto px-4 py-3 flex flex-col space-y-3">
                <a href="#upload" class="text-gray-700 hover:text-primary transition-colors py-2">上传图书</a>
                <a href="#library" class="text-gray-700 hover:text-primary transition-colors py-2">我的图书馆</a>
                <button id="mobile-logout-btn" class="hidden px-4 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors">
                    退出阅读
                </button>
            </div>
        </div>
    </nav>

    <!-- 英雄区域 -->
    <section class="pt-24 pb-16 bg-gradient-to-br from-primary/90 to-secondary text-white">
        <div class="container mx-auto px-4">
            <div class="max-w-3xl mx-auto text-center">
                <h2 class="text-[clamp(2rem,5vw,3.5rem)] font-bold mb-6 text-shadow">
                    您的私人数字图书馆
                </h2>
                <p class="text-lg md:text-xl mb-8 opacity-90">
                    上传、管理和阅读您的电子图书，享受沉浸式阅读体验
                </p>
                <div class="flex flex-col sm:flex-row justify-center gap-4">
                    <a href="#upload" class="px-6 py-3 bg-white text-primary font-semibold rounded-lg hover:bg-gray-100 transition-all transform hover:scale-105 shadow-lg">
                        上传图书
                    </a>
                    <a href="#library" class="px-6 py-3 bg-transparent border-2 border-white text-white font-semibold rounded-lg hover:bg-white/10 transition-all transform hover:scale-105">
                        浏览图书馆
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- 主内容区域 -->
    <main class="flex-grow container mx-auto px-4 py-12">
        <!-- 登录区域 -->
        <section id="login-section" class="max-w-md mx-auto mb-16">
            <div class="bg-white rounded-xl shadow-lg p-8 transform transition-all duration-500 hover:shadow-xl">
                <div class="text-center mb-6">
                    <i class="fa fa-lock text-primary text-4xl mb-3"></i>
                    <h2 class="text-2xl font-bold text-dark">访问图书馆</h2>
                    <p class="text-gray-600">请输入密码解锁您的图书库</p>
                </div>
                <form id="login-form" class="space-y-4">
                    <div>
                        <label for="password" class="block text-sm font-medium text-gray-700 mb-1">密码</label>
                        <div class="relative">
                            <input type="password" id="password" name="password" placeholder="输入访问密码" 
                                class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all outline-none"
                                required>
                            <button type="button" id="toggle-password" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600">
                                <i class="fa fa-eye-slash"></i>
                            </button>
                        </div>
                    </div>
                    <div class="pt-2">
                        <button type="submit" class="w-full bg-primary hover:bg-secondary text-white font-medium py-3 px-4 rounded-lg transition-colors duration-300 flex items-center justify-center">
                            <span>登录图书馆</span>
                            <i class="fa fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </form>
            </div>
        </section>

        <!-- 上传区域 -->
        <section id="upload" class="hidden mb-16">
            <div class="bg-white rounded-xl shadow-lg p-8 transform transition-all duration-500 hover:shadow-xl">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold text-dark">上传新图书</h2>
                    <div class="flex space-x-2">
                        <button id="upload-help-btn" class="text-gray-500 hover:text-primary transition-colors">
                            <i class="fa fa-question-circle"></i>
                        </button>
                    </div>
                </div>
                
                <form id="upload-form" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="book-title" class="block text-sm font-medium text-gray-700 mb-1">书名</label>
                            <input type="text" id="book-title" name="title" placeholder="输入书名" 
                                class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all outline-none"
                                required>
                        </div>
                        <div>
                            <label for="book-author" class="block text-sm font-medium text-gray-700 mb-1">作者</label>
                            <input type="text" id="book-author" name="author" placeholder="输入作者" 
                                class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all outline-none"
                                required>
                        </div>
                        <div>
                            <label for="book-category" class="block text-sm font-medium text-gray-700 mb-1">分类</label>
                            <select id="book-category" name="category" 
                                class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all outline-none">
                                <option value="文学">文学</option>
                                <option value="科学">科学</option>
                                <option value="技术">技术</option>
                                <option value="历史">历史</option>
                                <option value="哲学">哲学</option>
                                <option value="艺术">艺术</option>
                                <option value="其他">其他</option>
                            </select>
                        </div>
                        <div>
                            <label for="book-year" class="block text-sm font-medium text-gray-700 mb-1">出版年份</label>
                            <input type="number" id="book-year" name="year" placeholder="输入出版年份" 
                                class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all outline-none">
                        </div>
                    </div>
                    
                    <div>
                        <label for="book-description" class="block text-sm font-medium text-gray-700 mb-1">简介</label>
                        <textarea id="book-description" name="description" rows="3" placeholder="输入图书简介" 
                            class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all outline-none"></textarea>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">选择电子书文件</label>
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-primary transition-colors cursor-pointer">
                            <input type="file" id="book-file" name="file" accept=".pdf,.epub,.mobi,.txt" class="hidden">
                            <div id="file-drop-area">
                                <i class="fa fa-cloud-upload text-gray-400 text-4xl mb-3"></i>
                                <p class="text-gray-600 mb-1">拖放电子书文件到此处，或</p>
                                <button type="button" id="select-file-btn" class="text-primary hover:text-secondary font-medium">
                                    浏览文件
                                </button>
                                <p class="text-xs text-gray-500 mt-2">支持 PDF, EPUB, MOBI, TXT 格式</p>
                            </div>
                            <div id="file-preview" class="hidden mt-4">
                                <div class="flex items-center justify-between bg-gray-50 p-3 rounded-lg">
                                    <div class="flex items-center">
                                        <i id="file-icon" class="fa fa-file-pdf-o text-primary mr-3 text-xl"></i>
                                        <div>
                                            <p id="file-name" class="font-medium text-gray-800"></p>
                                            <p id="file-size" class="text-xs text-gray-500"></p>
                                        </div>
                                    </div>
                                    <button type="button" id="remove-file-btn" class="text-gray-400 hover:text-red-500">
                                        <i class="fa fa-times"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="pt-2">
                        <button type="submit" id="submit-upload-btn" class="w-full bg-primary hover:bg-secondary text-white font-medium py-3 px-4 rounded-lg transition-colors duration-300 flex items-center justify-center opacity-70 cursor-not-allowed" disabled>
                            <i class="fa fa-upload mr-2"></i>
                            <span>上传图书</span>
                        </button>
                    </div>
                </form>
            </div>
        </section>

        <!-- 图书馆区域 -->
        <section id="library" class="hidden">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                <h2 class="text-2xl font-bold text-dark mb-4 md:mb-0">我的图书馆</h2>
                <div class="flex flex-col sm:flex-row gap-3 w-full md:w-auto">
                    <div class="relative">
                        <input type="text" id="search-books" placeholder="搜索图书..." 
                            class="w-full sm:w-64 px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all outline-none">
                        <i class="fa fa-search absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                    </div>
                    <div class="flex gap-2">
                        <button id="sort-books" class="px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center">
                            <i class="fa fa-sort mr-2"></i>
                            <span>排序</span>
                        </button>
                        <button id="filter-books" class="px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center">
                            <i class="fa fa-filter mr-2"></i>
                            <span>筛选</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- 空图书馆状态 -->
            <div id="empty-library" class="hidden text-center py-12">
                <div class="bg-white rounded-xl shadow-lg p-8 max-w-md mx-auto transform transition-all duration-500 hover:shadow-xl">
                    <i class="fa fa-book text-gray-300 text-6xl mb-4"></i>
                    <h3 class="text-xl font-bold text-gray-700 mb-2">您的图书馆是空的</h3>
                    <p class="text-gray-500 mb-6">上传您的第一本电子书，开始建立您的数字图书馆</p>
                    <a href="#upload" class="inline-block px-6 py-3 bg-primary text-white font-semibold rounded-lg hover:bg-secondary transition-colors transform hover:scale-105">
                        上传第一本图书
                    </a>
                </div>
            </div>
            
            <!-- 图书网格 -->
            <div id="books-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                <!-- 图书卡片会通过 JavaScript 动态添加 -->
            </div>
            
            <!-- 加载更多 -->
            <div id="load-more" class="text-center mt-10">
                <button class="px-6 py-3 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center mx-auto">
                    <i class="fa fa-refresh mr-2"></i>
                    <span>加载更多</span>
                </button>
            </div>
        </section>

        <!-- 阅读器区域 -->
        <section id="reader" class="hidden min-h-[80vh] flex flex-col">
            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center">
                    <div class="flex items-center mb-4 md:mb-0">
                        <button id="close-reader" class="text-gray-500 hover:text-gray-700 mr-4">
                            <i class="fa fa-arrow-left text-xl"></i>
                        </button>
                        <div>
                            <h2 id="reader-title" class="text-xl font-bold text-dark"></h2>
                            <p id="reader-author" class="text-gray-600"></p>
                        </div>
                    </div>
                    <div class="flex space-x-3">
                        <button id="font-size-decrease" class="p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                            <i class="fa fa-font text-sm"></i>
                        </button>
                        <button id="font-size-increase" class="p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                            <i class="fa fa-font text-lg"></i>
                        </button>
                        <button id="toggle-theme" class="p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                            <i class="fa fa-moon-o"></i>
                        </button>
                        <button id="bookmark-page" class="p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                            <i class="fa fa-bookmark-o"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="flex-grow bg-white rounded-xl shadow-lg overflow-hidden flex flex-col md:flex-row">
                <!-- 侧边栏 -->
                <div id="reader-sidebar" class="w-full md:w-64 bg-gray-50 border-r border-gray-200 overflow-y-auto">
                    <div class="p-4 border-b border-gray-200">
                        <div class="relative">
                            <input type="text" placeholder="搜索目录..." 
                                class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all outline-none text-sm">
                            <i class="fa fa-search absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm"></i>
                        </div>
                    </div>
                    <div class="p-4">
                        <h3 class="font-medium text-gray-700 mb-2">目录</h3>
                        <ul id="table-of-contents" class="space-y-1 text-sm">
                            <!-- 目录会通过 JavaScript 动态添加 -->
                        </ul>
                    </div>
                </div>
                
                <!-- 阅读区域 -->
                <div id="reader-content" class="flex-grow p-6 md:p-10 overflow-y-auto bg-white" style="font-size: 16px;">
                    <div id="book-content" class="prose max-w-none">
                        <!-- 图书内容会通过 JavaScript 动态添加 -->
                    </div>
                </div>
            </div>
            
            <!-- 阅读器底部控制栏 -->
            <div class="mt-6 bg-white rounded-xl shadow-lg p-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <button id="prev-page" class="p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                            <i class="fa fa-chevron-left"></i>
                        </button>
                        <span id="page-info" class="text-sm text-gray-600">第 1 页，共 100 页</span>
                        <button id="next-page" class="p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                            <i class="fa fa-chevron-right"></i>
                        </button>
                    </div>
                    <div class="flex items-center">
                        <input type="range" id="page-slider" min="1" max="100" value="1" 
                            class="w-48 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                    </div>
                    <div class="flex items-center space-x-4">
                        <button id="go-to-bookmark" class="p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                            <i class="fa fa-bookmark"></i>
                        </button>
                        <button id="toggle-sidebar" class="p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                            <i class="fa fa-bars"></i>
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- 页脚 -->
    <footer class="bg-dark text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center space-x-2 mb-4">
                        <i class="fa fa-book text-primary text-2xl"></i>
                        <h3 class="text-xl font-bold">图书宝库</h3>
                    </div>
                    <p class="text-gray-400 mb-4">您的私人数字图书馆，安全存储和便捷阅读您的所有电子图书。</p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fa fa-facebook"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fa fa-twitter"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fa fa-instagram"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fa fa-github"></i>
                        </a>
                    </div>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">快速链接</h4>
                    <ul class="space-y-2">
                        <li><a href="#upload" class="text-gray-400 hover:text-white transition-colors">上传图书</a></li>
                        <li><a href="#library" class="text-gray-400 hover:text-white transition-colors">我的图书馆</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-colors">使用帮助</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-colors">隐私政策</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">联系我们</h4>
                    <ul class="space-y-2">
                        <li class="flex items-start">
                            <i class="fa fa-envelope-o text-primary mt-1 mr-2"></i>
                            <span class="text-gray-400">support@booktreasure.com</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fa fa-phone text-primary mt-1 mr-2"></i>
                            <span class="text-gray-400">+86 123 4567 8910</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fa fa-map-marker text-primary mt-1 mr-2"></i>
                            <span class="text-gray-400">北京市海淀区中关村南大街5号</span>
                        </li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">订阅更新</h4>
                    <p class="text-gray-400 mb-4">订阅我们的通讯，获取最新功能和更新信息。</p>
                    <form class="space-y-2">
                        <input type="email" placeholder="您的邮箱地址" 
                            class="w-full px-4 py-2 rounded-lg bg-gray-800 border border-gray-700 text-white placeholder-gray-500 focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all outline-none">
                        <button type="submit" class="w-full bg-primary hover:bg-secondary text-white font-medium py-2 px-4 rounded-lg transition-colors">
                            订阅
                        </button>
                    </form>
                </div>
            </div>
            <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-500">
                <p>&copy; 2025 图书宝库. 保留所有权利.</p>
            </div>
        </div>
    </footer>

    <!-- 模态框 -->
    <div id="modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl shadow-xl max-w-md w-full mx-4 transform transition-all duration-300 scale-95 opacity-0" id="modal-content">
            <div class="p-6">
                <div class="flex justify-between items-start mb-4">
                    <h3 id="modal-title" class="text-xl font-bold text-dark"></h3>
                    <button id="close-modal" class="text-gray-400 hover:text-gray-600">
                        <i class="fa fa-times"></i>
                    </button>
                </div>
                <div id="modal-body" class="mb-6"></div>
                <div class="flex justify-end space-x-3">
                    <button id="modal-cancel-btn" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                        取消
                    </button>
                    <button id="modal-confirm-btn" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors">
                        确认
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 通知提示 -->
    <div id="notification" class="fixed top-4 right-4 max-w-xs w-full bg-white rounded-lg shadow-lg p-4 transform translate-x-full transition-transform duration-300 flex items-start z-50">
        <div id="notification-icon" class="mr-3 text-xl"></div>
        <div class="flex-grow">
            <h4 id="notification-title" class="font-medium text-gray-800"></h4>
            <p id="notification-message" class="text-sm text-gray-600"></p>
        </div>
        <button id="close-notification" class="text-gray-400 hover:text-gray-600 ml-2">
            <i class="fa fa-times"></i>
        </button>
    </div>

    <script>
        // 应用状态管理
        const appState = {
            isLoggedIn: false,
            currentBook: null,
            currentPage: 1,
            totalPages: 100,
            fontSize: 16,
            darkMode: false,
            books: [
                // 示例图书数据
                {
                    id: 1,
                    title: "Python 数据分析实战",
                    author: "张三",
                    category: "技术",
                    year: 2023,
                    description: "本书全面介绍了Python在数据分析领域的应用，从基础到高级技巧，适合数据科学爱好者阅读。",
                    file: "python_data_analysis.pdf",
                    fileType: "pdf",
                    cover: "https://picsum.photos/seed/python/200/300",
                    uploadDate: "2023-06-15",
                    bookmarks: [10, 25, 45]
                },
                {
                    id: 2,
                    title: "人类简史",
                    author: "尤瓦尔·赫拉利",
                    category: "历史",
                    year: 2014,
                    description: "从认知革命、农业革命到科学革命，本书讲述了人类如何从一个普通的非洲灵长类动物，演变为地球的主宰。",
                    file: "brief_history_of_humankind.epub",
                    fileType: "epub",
                    cover: "https://picsum.photos/seed/history/200/300",
                    uploadDate: "2023-05-22",
                    bookmarks: [5, 18, 32]
                },
                {
                    id: 3,
                    title: "活着",
                    author: "余华",
                    category: "文学",
                    year: 1992,
                    description: "讲述了在大时代背景下，主人公福贵的人生和家庭不断经受着苦难，到了最后，所有亲人都先后离他而去，仅剩下年老的他和一头老牛相依为命。",
                    file: "to_live.txt",
                    fileType: "txt",
                    cover: "https://picsum.photos/seed/live/200/300",
                    uploadDate: "2023-04-10",
                    bookmarks: [8, 22, 37]
                },
                {
                    id: 4,
                    title: "时间简史",
                    author: "史蒂芬·霍金",
                    category: "科学",
                    year: 1988,
                    description: "这本书自1988年首版以来，被翻译成40种文字，累计销售量突破2500万册，是畅销全世界的科学著作。",
                    file: "a_brief_history_of_time.mobi",
                    fileType: "mobi",
                    cover: "https://picsum.photos/seed/time/200/300",
                    uploadDate: "2023-03-18",
                    bookmarks: [12, 29, 41]
                }
            ],
            // 模拟图书内容数据
            bookContents: {
                1: `
                    <h1>Python 数据分析实战</h1>
                    <p class="lead">数据科学与人工智能时代的必备技能</p>
                    
                    <h2>第1章 数据分析简介</h2>
                    <p>数据分析是指用适当的统计分析方法对收集来的大量数据进行分析，将它们加以汇总和理解并消化，以求最大化地开发数据的功能，发挥数据的作用。数据分析是为了提取有用信息和形成结论而对数据加以详细研究和概括总结的过程。</p>
                    
                    <h3>1.1 数据分析的重要性</h3>
                    <p>在当今数字化时代，数据已经成为企业和组织最重要的资产之一。通过数据分析，我们可以：</p>
                    <ul>
                        <li>发现业务趋势和模式</li>
                        <li>做出基于数据的决策</li>
                        <li>优化业务流程和提高效率</li>
                        <li>预测未来趋势和结果</li>
                        <li>提供个性化的用户体验</li>
                    </ul>
                    
                    <h3>1.2 数据分析的流程</h3>
                    <p>数据分析通常包含以下几个步骤：</p>
                    <ol>
                        <li>定义问题：明确需要分析的问题和目标</li>
                        <li>收集数据：从各种来源收集相关数据</li>
                        <li>清洗数据：处理缺失值、异常值和重复数据</li>
                        <li>分析数据：应用统计方法和机器学习算法进行分析</li>
                        <li>可视化结果：将分析结果以图表和报表的形式呈现</li>
                        <li>解释和报告：解释结果并提出建议和决策</li>
                    </ol>
                    
                    <h2>第2章 Python 数据分析基础</h2>
                    <p>Python是一种广泛使用的高级编程语言，特别适合数据分析和科学计算。Python拥有丰富的数据分析库和工具，如NumPy、Pandas、Matplotlib和Scikit-learn等。</p>
                    
                    <h3>2.1 Python 环境搭建</h3>
                    <p>在开始使用Python进行数据分析之前，我们需要搭建一个合适的开发环境。推荐使用Anaconda，它是一个用于科学计算的Python发行版，包含了许多常用的数据分析库。</p>
                    
                    <h4>2.1.1 安装Anaconda</h4>
                    <p>可以从Anaconda官方网站下载适合您操作系统的安装包：</p>
                    <ul>
                        <li>Windows用户：下载Windows版本的Anaconda安装程序</li>
                        <li>Mac用户：下载macOS版本的Anaconda安装程序</li>
                        <li>Linux用户：下载Linux版本的Anaconda安装脚本</li>
                    </ul>
                    
                    <p>安装完成后，可以通过命令行检查Anaconda是否正确安装：</p>
                    <pre><code>conda --version</code></pre>
                    
                    <h4>2.1.2 创建虚拟环境</h4>
                    <p>为了避免不同项目之间的依赖冲突，建议为每个项目创建一个独立的虚拟环境：</p>
                    <pre><code>conda create -n data_analysis python=3.9</code></pre>
                    
                    <p>激活虚拟环境：</p>
                    <pre><code>conda activate data_analysis</code></pre>
                `,
                2: `
                    <h1>人类简史</h1>
                    <p class="lead">从动物到上帝的人类进化史</p>
                    
                    <h2>认知革命</h2>
                    <p>大约7万年前，人类语言发生了重大变革，产生了新的语言形式，我们称之为"虚构故事"的能力。这种能力让人类能够创造并相信虚构的事物，如宗教、国家、法律和公司等。</p>
                    
                    <p>虚构故事的出现是人类历史上的一个重大转折点，它让人类能够大规模合作，从而超越了其他动物的社会组织形式。其他动物最多只能形成几十只个体的群体，而人类通过虚构故事，能够形成成千上万甚至上百万人的合作网络。</p>
                    
                    <h3>虚构故事的力量</h3>
                    <p>虚构故事的力量在于它能够让人们相信共同的信仰和价值观，从而协调行动。例如，宗教信仰让人们能够共同崇拜同一个神灵，遵守相同的道德规范；国家让人们能够共同效忠于同一个政治实体，遵守相同的法律；公司让人们能够共同为同一个商业目标而努力。</p>
                    
                    <p>虚构故事并不是谎言，而是人类共同想象的产物。虽然这些故事在客观世界中并不存在，但它们在人类社会中却具有真实的力量。例如，美元、人权和有限公司等都是人类虚构的故事，但它们却在全球范围内发挥着重要的作用。</p>
                    
                    <h2>农业革命</h2>
                    <p>大约1万年前，人类开始从狩猎采集社会向农业社会过渡，这一过程被称为"农业革命"。农业革命是人类历史上的另一个重大转折点，它让人类能够生产更多的食物，从而支持更大规模的人口增长和定居生活。</p>
                    
                    <p>农业革命的出现并不是因为人类聪明地发现了农业生产的方法，而是因为气候变化和人口压力等因素迫使人类不得不寻找新的生存方式。最初，农业生产可能只是一种辅助性的生存手段，但随着时间的推移，农业逐渐成为人类主要的食物来源。</p>
                    
                    <h3>农业革命的影响</h3>
                    <p>农业革命对人类社会产生了深远的影响：</p>
                    <ul>
                        <li>人口增长：农业生产能够提供更多的食物，从而支持更大规模的人口增长。据估计，在农业革命之前，全球人口大约只有几百万；而到了公元1世纪，全球人口已经增长到了约2.5亿。</li>
                        <li>定居生活：农业生产需要人们长期定居在一个地方，从而导致了村庄、城镇和城市的出现。定居生活让人们能够积累更多的财产和资源，从而促进了社会分工和专业化的发展。</li>
                        <li>社会不平等：农业生产让一些人能够积累更多的财富和资源，从而导致了社会不平等的出现。在农业社会中，出现了阶级分化，有贵族、祭司、农民和奴隶等不同的社会阶层。</li>
                        <li>环境破坏：农业生产需要大量的土地和水资源，从而导致了环境破坏和生态失衡。例如，森林砍伐、水土流失和水资源短缺等问题都是农业革命带来的负面影响。</li>
                    </ul>
                `,
                3: `
                    <h1>活着</h1>
                    <p class="lead">在苦难中寻找生命的意义</p>
                    
                    <h2>第一章</h2>
                    <p>我比现在年轻十岁的时候，获得了一个游手好闲的职业，去乡间收集民间歌谣。那一年的整个夏天，我如同一只乱飞的麻雀，游荡在知了和阳光充斥的乡村。</p>
                    
                    <p>我喜欢喝农民那种带苦味的茶水，他们的茶桶就放在田埂的树下，我毫无顾忌地拿起漆满茶垢的茶碗舀水喝，还把自己的水壶灌满，与田里干活的男人说上几句废话，在姑娘因我而起的窃笑声里扬长而去。</p>
                    
                    <p>我曾经和一位守着瓜田的老人聊了整整一个下午，这是我有生以来瓜吃得最多的一次，当我站起来告辞时，突然发现自己像个孕妇一样步履艰难了。然后我与一位当上了祖母的女人坐在门槛上，她编着草鞋为我唱了一支《十月怀胎》。</p>
                    
                    <h2>第二章</h2>
                    <p>我爹走到我房门口时，朝里喊了一声："鸡养大了变成鹅，鹅养大了变成羊，羊养大了变成牛。" 我知道他是在提醒我，家珍肚子里的孩子快有十个月了。</p>
                    
                    <p>我爹进城卖了一头羊和半车豆饼，拿了钱就去找郎中。郎中是个五十来岁的瘦老头，鼻梁上架着一副油光发亮的老花镜。我爹把郎中请到家里时，家珍已经疼了一天一夜，到了晚上家珍疼得实在受不了，两只手紧紧捏住床沿，身体抖得像是筛糠一样。</p>
                    
                    <p>郎中把了脉后，皱着眉头说："怕是难产。" 我爹一听就慌了，忙问："那怎么办？" 郎中说："只有请产婆了。" 我爹赶紧让人去请产婆。产婆是个四十来岁的胖女人，一进屋就说："我接生过几百个孩子了，还从没见过生不下来的。" 说着就卷起袖子要动手。</p>
                    
                    <h2>第三章</h2>
                    <p>家珍生下了一个儿子，母子平安。我爹高兴得不得了，给孙子取名叫有庆。有庆满月那天，我爹请了村里的人来喝酒，他喝得满脸通红，拉着我的手说："凤霞没了，现在有了有庆，这是老天爷可怜我们，给我们送来的福气。"</p>
                    
                    <p>有庆很招人喜欢，长得白白胖胖的，见人就笑。我爹整天抱着他，走东家串西家，逢人就说："这是我孙子，有庆。" 村里的人都说有庆长得像家珍，家珍听了很开心。</p>
                    
                    <p>有庆会走路了，就跟着我爹在村里到处跑。我爹去田里干活，他也跟着去，坐在田埂上看我爹干活。我爹歇下来时，就把他抱在怀里，给他讲故事。有庆听得很入神，一双眼睛眨也不眨地看着我爹。</p>
                `,
                4: `
                    <h1>时间简史</h1>
                    <p class="lead">从大爆炸到黑洞的宇宙奥秘</p>
                    
                    <h2>第一章 我们的宇宙图像</h2>
                    <p>人类自古以来就对宇宙充满了好奇，试图理解我们所处的世界。早期的宇宙观主要基于神话和宗教，认为宇宙是由神创造的，并且是永恒不变的。</p>
                    
                    <p>直到公元前340年，希腊哲学家亚里士多德在他的《论天》一书中，提出了地球是一个圆球而不是平板的理论。他观察到月食时地球在月球上的影子总是圆的，这表明地球是一个球体。亚里士多德还认为，宇宙是有限的，地球位于宇宙的中心，而其他天体则围绕地球旋转。</p>
                    
                    <h3>地心说与日心说</h3>
                    <p>亚里士多德的地心说理论在中世纪被天主教会所接受，并成为了西方世界的主流宇宙观。直到16世纪，波兰天文学家哥白尼提出了日心说理论，认为太阳是宇宙的中心，而地球和其他行星则围绕太阳旋转。</p>
                    
                    <p>哥白尼的日心说理论在当时遭到了教会的强烈反对，因为它与圣经中的描述相矛盾。然而，随着科学技术的发展，越来越多的证据支持了哥白尼的理论。例如，意大利天文学家伽利略通过望远镜观察到了木星的卫星，这表明并非所有天体都围绕地球旋转。</p>
                    
                    <h2>第二章 空间和时间</h2>
                    <p>在牛顿的经典力学中，空间和时间被认为是绝对的，独立于物体和观察者的存在。空间被看作是一个三维的容器，而时间则是一条均匀流逝的河流，不受任何事物的影响。</p>
                    
                    <p>然而，爱因斯坦的相对论彻底改变了我们对空间和时间的理解。相对论分为狭义相对论和广义相对论两部分。狭义相对论提出于1905年，它基于两个基本原理：光速不变原理和相对性原理。</p>
                    
                    <h3>狭义相对论</h3>
                    <p>光速不变原理指出，无论观察者以何种速度运动，光速在真空中都是恒定的。相对性原理则指出，物理定律在所有惯性参考系中都是相同的。</p>
                    
                    <p>从这两个原理出发，爱因斯坦推导出了一系列惊人的结论。例如，时间和空间不再是绝对的，而是相对的。当物体以接近光速的速度运动时，时间会变慢，空间会收缩。这就是所谓的"时间膨胀"和"长度收缩"效应。</p>
                    
                    <p>另一个重要的结论是质能等价原理，即E=mc²。这个公式表明，质量和能量是等价的，可以相互转换。这一原理为核能的开发和利用提供了理论基础。</p>
                `
            },
            // 模拟目录数据
            tableOfContents: {
                1: [
                    { title: "第1章 数据分析简介", page: 1 },
                    { title: "1.1 数据分析的重要性", page: 3 },
                    { title: "1.2 数据分析的流程", page: 5 },
                    { title: "第2章 Python 数据分析基础", page: 8 },
                    { title: "2.1 Python 环境搭建", page: 10 },
                    { title: "2.1.1 安装Anaconda", page: 12 },
                    { title: "2.1.2 创建虚拟环境", page: 14 },
                    { title: "2.2 Python 基础语法", page: 16 },
                    { title: "2.2.1 变量和数据类型", page: 18 },
                    { title: "2.2.2 控制结构", page: 20 },
                    { title: "2.2.3 函数和模块", page: 22 },
                    { title: "第3章 NumPy 数组", page: 25 },
                    { title: "3.1 NumPy 简介", page: 27 },
                    { title: "3.2 创建NumPy数组", page: 29 },
                    { title: "3.3 数组操作", page: 31 },
                    { title: "3.4 数学运算", page: 33 },
                    { title: "第4章 Pandas 数据处理", page: 36 },
                    { title: "4.1 Pandas 简介", page: 38 },
                    { title: "4.2 Series 对象", page: 40 },
                    { title: "4.3 DataFrame 对象", page: 42 },
                    { title: "4.4 数据筛选和处理", page: 45 },
                    { title: "第5章 Matplotlib 数据可视化", page: 48 },
                    { title: "5.1 Matplotlib 简介", page: 50 },
                    { title: "5.2 基本绘图", page: 52 },
                    { title: "5.3 高级绘图", page: 55 },
                    { title: "5.4 可视化案例", page: 58 }
                ],
                2: [
                    { title: "认知革命", page: 1 },
                    { title: "虚构故事的力量", page: 5 },
                    { title: "农业革命", page: 10 },
                    { title: "农业革命的影响", page: 15 },
                    { title: "人类的融合统一", page: 20 },
                    { title: "金钱的味道", page: 25 },
                    { title: "帝国的愿景", page: 30 },
                    { title: "宗教的法则", page: 35 },
                    { title: "科学革命", page: 40 },
                    { title: "发现自己的无知", page: 45 },
                    { title: "以资本之名", page: 50 },
                    { title: "工业的巨轮", page: 55 },
                    { title: "一场永远的革命", page: 60 },
                    { title: "幸福快乐的权利", page: 65 },
                    { title: "智人末日", page: 70 }
                ],
                3: [
                    { title: "第一章", page: 1 },
                    { title: "第二章", page: 8 },
                    { title: "第三章", page: 15 },
                    { title: "第四章", page: 22 },
                    { title: "第五章", page: 29 },
                    { title: "第六章", page: 36 },
                    { title: "第七章", page: 43 },
                    { title: "第八章", page: 50 },
                    { title: "第九章", page: 57 },
                    { title: "第十章", page: 64 },
                    { title: "第十一章", page: 71 },
                    { title: "第十二章", page: 78 },
                    { title: "第十三章", page: 85 },
                    { title: "第十四章", page: 92 },
                    { title: "第十五章", page: 99 }
                ],
                4: [
                    { title: "第一章 我们的宇宙图像", page: 1 },
                    { title: "第二章 空间和时间", page: 7 },
                    { title: "第三章 膨胀的宇宙", page: 13 },
                    { title: "第四章 不确定性原理", page: 19 },
                    { title: "第五章 基本粒子和自然的力", page: 25 },
                    { title: "第六章 黑洞", page: 31 },
                    { title: "第七章 黑洞不是这么黑的", page: 37 },
                    { title: "第八章 宇宙的起源和命运", page: 43 },
                    { title: "第九章 时间箭头", page: 49 },
                    { title: "第十章 虫洞和时间旅行", page: 55 },
                    { title: "第十一章 物理学的统一", page: 61 },
                    { title: "第十二章 结论", page: 67 },
                    { title: "阿尔伯特·爱因斯坦", page: 73 },
                    { title: "伽利略·伽利雷", page: 75 },
                    { title: "艾萨克·牛顿", page: 77 },
                    { title: "小辞典", page: 79 },
                    { title: "感谢", page: 83 }
                ]
            }
        };

        // DOM 元素
        const loginForm = document.getElementById('login-form');
        const passwordInput = document.getElementById('password');
        const togglePassword = document.getElementById('toggle-password');
        const loginSection = document.getElementById('login-section');
        const uploadSection = document.getElementById('upload');
        const librarySection = document.getElementById('library');
        const readerSection = document.getElementById('reader');
        const booksGrid = document.getElementById('books-grid');
        const emptyLibrary = document.getElementById('empty-library');
        const logoutBtn = document.getElementById('logout-btn');
        const mobileLogoutBtn = document.getElementById('mobile-logout-btn');
        const uploadForm = document.getElementById('upload-form');
        const bookFile = document.getElementById('book-file');
        const selectFileBtn = document.getElementById('select-file-btn');
        const fileDropArea = document.getElementById('file-drop-area');
        const filePreview = document.getElementById('file-preview');
        const fileName = document.getElementById('file-name');
        const fileSize = document.getElementById('file-size');
        const fileIcon = document.getElementById('file-icon');
        const removeFileBtn = document.getElementById('remove-file-btn');
        const submitUploadBtn = document.getElementById('submit-upload-btn');
        const uploadHelpBtn = document.getElementById('upload-help-btn');
        const closeReader = document.getElementById('close-reader');
        const readerTitle = document.getElementById('reader-title');
        const readerAuthor = document.getElementById('reader-author');
        const bookContent = document.getElementById('book-content');
        const tableOfContents = document.getElementById('table-of-contents');
        const prevPage = document.getElementById('prev-page');
        const nextPage = document.getElementById('next-page');
        const pageSlider = document.getElementById('page-slider');
        const pageInfo = document.getElementById('page-info');
        const fontSizeDecrease = document.getElementById('font-size-decrease');
        const fontSizeIncrease = document.getElementById('font-size-increase');
        const toggleTheme = document.getElementById('toggle-theme');
        const bookmarkPage = document.getElementById('bookmark-page');
        const goToBookmark = document.getElementById('go-to-bookmark');
        const toggleSidebar = document.getElementById('toggle-sidebar');
        const readerSidebar = document.getElementById('reader-sidebar');
        const readerContent = document.getElementById('reader-content');
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const searchBooks = document.getElementById('search-books');
        const sortBooks = document.getElementById('sort-books');
        const filterBooks = document.getElementById('filter-books');
        const loadMore = document.getElementById('load-more');
        const modal = document.getElementById('modal');
        const modalContent = document.getElementById('modal-content');
        const modalTitle = document.getElementById('modal-title');
        const modalBody = document.getElementById('modal-body');
        const modalCancelBtn = document.getElementById('modal-cancel-btn');
        const modalConfirmBtn = document.getElementById('modal-confirm-btn');
        const closeModal = document.getElementById('close-modal');
        const notification = document.getElementById('notification');
        const notificationIcon = document.getElementById('notification-icon');
        const notificationTitle = document.getElementById('notification-title');
        const notificationMessage = document.getElementById('notification-message');
        const closeNotification = document.getElementById('close-notification');
        const mainNav = document.getElementById('main-nav');

        // 初始化应用
        function initApp() {
            // 检查是否已登录
            if (localStorage.getItem('isLoggedIn') === 'true') {
                appState.isLoggedIn = true;
                showSection('library');
                renderBooks();
            } else {
                showSection('login');
            }

            // 事件监听器
            loginForm.addEventListener('submit', handleLogin);
            togglePassword.addEventListener('click', togglePasswordVisibility);
            logoutBtn.addEventListener('click', handleLogout);
            mobileLogoutBtn.addEventListener('click', handleLogout);
            uploadForm.addEventListener('submit', handleUpload);
            selectFileBtn.addEventListener('click', () => bookFile.click());
            bookFile.addEventListener('change', handleFileSelect);
            fileDropArea.addEventListener('dragover', handleDragOver);
            fileDropArea.addEventListener('dragleave', handleDragLeave);
            fileDropArea.addEventListener('drop', handleDrop);
            removeFileBtn.addEventListener('click', removeSelectedFile);
            mobileMenuBtn.addEventListener('click', toggleMobileMenu);
            closeReader.addEventListener('click', closeBookReader);
            prevPage.addEventListener('click', goToPrevPage);
            nextPage.addEventListener('click', goToNextPage);
            pageSlider.addEventListener('input', updatePage);
            fontSizeDecrease.addEventListener('click', decreaseFontSize);
            fontSizeIncrease.addEventListener('click', increaseFontSize);
            toggleTheme.addEventListener('click', toggleReadingTheme);
            bookmarkPage.addEventListener('click', toggleBookmark);
            goToBookmark.addEventListener('click', goToLastBookmark);
            toggleSidebar.addEventListener('click', toggleSidebarVisibility);
            searchBooks.addEventListener('input', searchBook);
            sortBooks.addEventListener('click', showSortOptions);
            filterBooks.addEventListener('click', showFilterOptions);
            loadMore.addEventListener('click', loadMoreBooks);
            modalCancelBtn.addEventListener('click', closeModalDialog);
            closeModal.addEventListener('click', closeModalDialog);
            closeNotification.addEventListener('click', hideNotification);
            uploadHelpBtn.addEventListener('click', showUploadHelp);
            mainNav.addEventListener('scroll', handleScroll);

            // 平滑滚动
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    if (targetId === '#upload' || targetId === '#library') {
                        showSection(targetId.substring(1));
                    }
                });
            });
        }

        // 显示指定部分
        function showSection(section) {
            // 隐藏所有部分
            loginSection.classList.add('hidden');
            uploadSection.classList.add('hidden');
            librarySection.classList.add('hidden');
            readerSection.classList.add('hidden');

            // 显示指定部分
            if (section === 'login') {
                loginSection.classList.remove('hidden');
            } else if (section === 'upload') {
                uploadSection.classList.remove('hidden');
            } else if (section === 'library') {
                librarySection.classList.remove('hidden');
                renderBooks();
            } else if (section === 'reader') {
                readerSection.classList.remove('hidden');
                renderBookReader();
            }

            // 更新导航栏状态
            if (section === 'reader') {
                logoutBtn.classList.remove('hidden');
                mobileLogoutBtn.classList.remove('hidden');
            } else {
                logoutBtn.classList.add('hidden');
                mobileLogoutBtn.classList.add('hidden');
            }
        }

        // 处理登录
        function handleLogin(e) {
            e.preventDefault();
            const password = passwordInput.value.trim();
            
            if (password === '20170623') {
                appState.isLoggedIn = true;
                localStorage.setItem('isLoggedIn', 'true');
                showSection('library');
                showNotification('success', '登录成功', '欢迎回来，您可以开始浏览或上传图书了。');
            } else {
                showNotification('error', '登录失败', '密码不正确，请重试。');
            }
        }

        // 切换密码可见性
        function togglePasswordVisibility() {
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            togglePassword.innerHTML = type === 'password' ? '<i class="fa fa-eye-slash"></i>' : '<i class="fa fa-eye"></i>';
        }

        // 处理登出
        function handleLogout() {
            appState.isLoggedIn = false;
            localStorage.removeItem('isLoggedIn');
            showSection('login');
            showNotification('info', '已登出', '您已成功退出图书馆。');
        }

        // 渲染图书列表
        function renderBooks() {
            booksGrid.innerHTML = '';
            
            if (appState.books.length === 0) {
                emptyLibrary.classList.remove('hidden');
                return;
            }
            
            emptyLibrary.classList.add('hidden');
            
            appState.books.forEach(book => {
                const bookCard = document.createElement('div');
                bookCard.className = 'bg-white rounded-xl shadow-lg overflow-hidden transform transition-all duration-300 hover:shadow-xl hover:-translate-y-1 group';
                bookCard.innerHTML = `
                    <div class="relative h-48 overflow-hidden">
                        <img src="${book.cover}" alt="${book.title}封面" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
                        <div class="absolute top-2 right-2 bg-primary text-white text-xs font-bold px-2 py-1 rounded">
                            ${book.category}
                        </div>
                    </div>
                    <div class="p-4">
                        <h3 class="font-bold text-lg mb-1 line-clamp-1">${book.title}</h3>
                        <p class="text-gray-600 text-sm mb-2 line-clamp-1">${book.author}</p>
                        <div class="flex items-center text-xs text-gray-500 mb-3">
                            <span class="mr-2"><i class="fa fa-calendar-o mr-1"></i>${book.year}</span>
                            <span><i class="fa fa-file-text-o mr-1"></i>${getFormatName(book.fileType)}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <button class="text-primary hover:text-secondary transition-colors text-sm font-medium" onclick="openBook(${book.id})">
                                阅读 <i class="fa fa-arrow-right ml-1"></i>
                            </button>
                            <div class="flex space-x-1">
                                <button class="text-gray-400 hover:text-primary transition-colors" onclick="showEditBook(${book.id})">
                                    <i class="fa fa-pencil"></i>
                                </button>
                                <button class="text-gray-400 hover:text-red-500 transition-colors" onclick="deleteBook(${book.id})">
                                    <i class="fa fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                booksGrid.appendChild(bookCard);
            });
        }

        // 获取文件格式名称
        function getFormatName(fileType) {
            const formatMap = {
                'pdf': 'PDF',
                'epub': 'EPUB',
                'mobi': 'MOBI',
                'txt': '文本'
            };
            return formatMap[fileType] || fileType.toUpperCase();
        }

        // 打开图书阅读
        function openBook(bookId) {
            const book = appState.books.find(b => b.id === bookId);
            if (book) {
                appState.currentBook = book;
                appState.currentPage = 1;
                showSection('reader');
            }
        }

        // 渲染图书阅读器
        function renderBookReader() {
            if (!appState.currentBook) return;
            
            const book = appState.currentBook;
            readerTitle.textContent = book.title;
            readerAuthor.textContent = book.author;
            
            // 设置图书内容
            const content = appState.bookContents[book.id] || '<p>加载中...</p>';
            bookContent.innerHTML = content;
            
            // 设置目录
            renderTableOfContents();
            
            // 更新页面信息
            updatePageInfo();
            
            // 更新阅读器样式
            updateReaderStyle();
        }

        // 渲染目录
        function renderTableOfContents() {
            tableOfContents.innerHTML = '';
            
            if (!appState.currentBook || !appState.tableOfContents[appState.currentBook.id]) return;
            
            appState.tableOfContents[appState.currentBook.id].forEach(item => {
                const tocItem = document.createElement('li');
                tocItem.className = 'cursor-pointer hover:text-primary transition-colors';
                tocItem.innerHTML = `
                    <a href="#" onclick="goToPage(${item.page}); return false;">
                        ${item.title}
                    </a>
                `;
                tableOfContents.appendChild(tocItem);
            });
        }

        // 前往指定页面
        function goToPage(page) {
            appState.currentPage = Math.max(1, Math.min(page, appState.totalPages));
            updatePageInfo();
        }

        // 前往上一页
        function goToPrevPage() {
            if (appState.currentPage > 1) {
                appState.currentPage--;
                updatePageInfo();
            }
        }

        // 前往下一页
        function goToNextPage() {
            if (appState.currentPage < appState.totalPages) {
                appState.currentPage++;
                updatePageInfo();
            }
        }

        // 更新页面信息
        function updatePage() {
            appState.currentPage = parseInt(pageSlider.value);
            updatePageInfo();
        }

        // 更新页面信息显示
        function updatePageInfo() {
            pageInfo.textContent = `第 ${appState.currentPage} 页，共 ${appState.totalPages} 页`;
            pageSlider.value = appState.currentPage;
            
            // 模拟页面切换效果
            bookContent.style.opacity = '0';
            setTimeout(() => {
                bookContent.style.opacity = '1';
            }, 100);
        }

        // 减小字体大小
        function decreaseFontSize() {
            appState.fontSize = Math.max(12, appState.fontSize - 2);
            updateReaderStyle();
        }

        // 增大字体大小
        function increaseFontSize() {
            appState.fontSize = Math.min(24, appState.fontSize + 2);
            updateReaderStyle();
        }

        // 更新阅读器样式
        function updateReaderStyle() {
            readerContent.style.fontSize = `${appState.fontSize}px`;
            
            if (appState.darkMode) {
                readerContent.classList.add('bg-gray-900', 'text-white');
                toggleTheme.innerHTML = '<i class="fa fa-sun-o"></i>';
            } else {
                readerContent.classList.remove('bg-gray-900', 'text-white');
                toggleTheme.innerHTML = '<i class="fa fa-moon-o"></i>';
            }
        }

        // 切换阅读主题
        function toggleReadingTheme() {
            appState.darkMode = !appState.darkMode;
            updateReaderStyle();
        }

        // 切换书签
        function toggleBookmark() {
            if (!appState.currentBook) return;
            
            const isBookmarked = appState.currentBook.bookmarks.includes(appState.currentPage);
            
            if (isBookmarked) {
                // 移除书签
                appState.currentBook.bookmarks = appState.currentBook.bookmarks.filter(p => p !== appState.currentPage);
                bookmarkPage.innerHTML = '<i class="fa fa-bookmark-o"></i>';
                showNotification('info', '书签已移除', `第 ${appState.currentPage} 页的书签已移除`);
            } else {
                // 添加书签
                appState.currentBook.bookmarks.push(appState.currentPage);
                appState.currentBook.bookmarks.sort((a, b) => a - b);
                bookmarkPage.innerHTML = '<i class="fa fa-bookmark"></i>';
                showNotification('success', '书签已添加', `第 ${appState.currentPage} 页已添加书签`);
            }
        }

        // 前往最后一个书签
        function goToLastBookmark() {
            if (!appState.currentBook || appState.currentBook.bookmarks.length === 0) {
                showNotification('info', '没有书签', '您还没有为此图书添加任何书签');
                return;
            }
            
            const lastBookmark = appState.currentBook.bookmarks[appState.currentBook.bookmarks.length - 1];
            appState.currentPage = lastBookmark;
            updatePageInfo();
            showNotification('info', '跳转到书签', `已跳转到第 ${lastBookmark} 页`);
        }

        // 切换侧边栏可见性
        function toggleSidebarVisibility() {
            readerSidebar.classList.toggle('hidden');
            readerSidebar.classList.toggle('md:block');
        }

        // 关闭图书阅读器
        function closeBookReader() {
            appState.currentBook = null;
            showSection('library');
        }

        // 处理文件拖放
        function handleDragOver(e) {
            e.preventDefault();
            e.preventDefault();
            fileDropArea.classList.add('border-primary', 'bg-primary/5');
        }

        function handleDragLeave() {
            fileDropArea.classList.remove('border-primary', 'bg-primary/5');
        }

        function handleDrop(e) {
            e.preventDefault();
            fileDropArea.classList.remove('border-primary', 'bg-primary/5');
            
            if (e.dataTransfer.files.length) {
                handleFileSelect(e);
            }
        }

        // 处理文件选择
        function handleFileSelect(e) {
            const file = e.target.files[0] || (e.dataTransfer ? e.dataTransfer.files[0] : null);
            
            if (file) {
                const fileSizeInMB = (file.size / (1024 * 1024)).toFixed(2);
                const fileExtension = file.name.split('.').pop().toLowerCase();
                
                // 检查文件类型
                if (!['pdf', 'epub', 'mobi', 'txt'].includes(fileExtension)) {
                    showNotification('error', '不支持的文件类型', '请上传 PDF, EPUB, MOBI 或 TXT 格式的文件');
                    return;
                }
                
                // 更新文件预览
                fileName.textContent = file.name;
                fileSize.textContent = `${fileSizeInMB} MB`;
                
                // 设置文件图标
                if (fileExtension === 'pdf') {
                    fileIcon.className = 'fa fa-file-pdf-o text-red-500 mr-3 text-xl';
                } else if (fileExtension === 'epub') {
                    fileIcon.className = 'fa fa-file-text-o text-blue-500 mr-3 text-xl';
                } else if (fileExtension === 'mobi') {
                    fileIcon.className = 'fa fa-file-text-o text-green-500 mr-3 text-xl';
                } else if (fileExtension === 'txt') {
                    fileIcon.className = 'fa fa-file-text-o text-gray-500 mr-3 text-xl';
                }
                
                fileDropArea.classList.add('hidden');
                filePreview.classList.remove('hidden');
                submitUploadBtn.classList.remove('opacity-70', 'cursor-not-allowed');
                submitUploadBtn.disabled = false;
            }
        }

        // 移除选中的文件
        function removeSelectedFile() {
            bookFile.value = '';
            fileDropArea.classList.remove('hidden');
            filePreview.classList.add('hidden');
            submitUploadBtn.classList.add('opacity-70', 'cursor-not-allowed');
            submitUploadBtn.disabled = true;
        }

        // 处理图书上传
        function handleUpload(e) {
            e.preventDefault();
            
            // 收集表单数据
            const title = document.getElementById('book-title').value.trim();
            const author = document.getElementById('book-author').value.trim();
            const category = document.getElementById('book-category').value;
            const year = document.getElementById('book-year').value;
            const description = document.getElementById('book-description').value.trim();
            
            // 验证表单
            if (!title || !author) {
                showNotification('error', '表单不完整', '请填写书名和作者');
                return;
            }
            
            if (!bookFile.files.length) {
                showNotification('error', '缺少文件', '请选择要上传的图书文件');
                return;
            }
            
            const file = bookFile.files[0];
            const fileExtension = file.name.split('.').pop().toLowerCase();
            
            // 创建新图书对象
            const newBook = {
                id: Date.now(), // 使用时间戳作为唯一ID
                title,
                author,
                category,
                year,
                description,
                file: file.name,
                fileType: fileExtension,
                cover: `https://picsum.photos/seed/${title.replace(/\s+/g, '-')}/200/300`,
                uploadDate: new Date().toISOString().split('T')[0],
                bookmarks: []
            };
            
            // 添加到图书列表
            appState.books.unshift(newBook);
            
            // 创建模拟的图书内容和目录
            appState.bookContents[newBook.id] = `
                <h1>${newBook.title}</h1>
                <p class="lead">由 ${newBook.author} 著</p>
                
                <h2>简介</h2>
                <p>${newBook.description || '暂无简介'}</p>
                
                <h2>第一章</h2>
                <p>这是${newBook.title}的第一章内容。在这一章中，我们将介绍本书的主要内容和核心概念...</p>
                
                <h2>第二章</h2>
                <p>在第二章中，我们将深入探讨...<p>
                
                <h2>第三章</h2>
                <p>第三章将讨论...</p>
            `;
            
            appState.tableOfContents[newBook.id] = [
                { title: "第一章", page: 1 },
                { title: "第二章", page: 10 },
                { title: "第三章", page: 20 },
                { title: "第四章", page: 30 },
                { title: "第五章", page: 40 },
                { title: "第六章", page: 50 },
                { title: "第七章", page: 60 },
                { title: "第八章", page: 70 },
                { title: "第九章", page: 80 },
                { title: "第十章", page: 90 }
            ];
            
            // 重置表单
            uploadForm.reset();
            removeSelectedFile();
            
            // 显示成功通知
            showNotification('success', '上传成功', `《${newBook.title}》已成功添加到您的图书馆`);
            
            // 显示图书馆
            showSection('library');
        }

        // 搜索图书
        function searchBook() {
            const searchTerm = searchBooks.value.toLowerCase().trim();
            
            if (!searchTerm) {
                renderBooks(); // 如果搜索词为空，显示所有图书
                return;
            }
            
            // 过滤图书
            const filteredBooks = appState.books.filter(book => 
                book.title.toLowerCase().includes(searchTerm) || 
                book.author.toLowerCase().includes(searchTerm) ||
                book.category.toLowerCase().includes(searchTerm)
            );
            
            // 清空并重新渲染图书网格
            booksGrid.innerHTML = '';
            
            if (filteredBooks.length === 0) {
                booksGrid.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <div class="bg-white rounded-xl shadow-lg p-8 max-w-md mx-auto">
                            <i class="fa fa-search text-gray-300 text-6xl mb-4"></i>
                            <h3 class="text-xl font-bold text-gray-700 mb-2">没有找到匹配的图书</h3>
                            <p class="text-gray-500 mb-6">尝试使用不同的关键词进行搜索</p>
                            <button class="px-6 py-3 bg-primary text-white font-semibold rounded-lg hover:bg-secondary transition-colors" onclick="renderBooks()">
                                显示所有图书
                            </button>
                        </div>
                    </div>
                `;
                return;
            }
            
            // 渲染过滤后的图书
            filteredBooks.forEach(book => {
                const bookCard = document.createElement('div');
                bookCard.className = 'bg-white rounded-xl shadow-lg overflow-hidden transform transition-all duration-300 hover:shadow-xl hover:-translate-y-1 group';
                bookCard.innerHTML = `
                    <div class="relative h-48 overflow-hidden">
                        <img src="${book.cover}" alt="${book.title}封面" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
                        <div class="absolute top-2 right-2 bg-primary text-white text-xs font-bold px-2 py-1 rounded">
                            ${book.category}
                        </div>
                    </div>
                    <div class="p-4">
                        <h3 class="font-bold text-lg mb-1 line-clamp-1">${book.title}</h3>
                        <p class="text-gray-600 text-sm mb-2 line-clamp-1">${book.author}</p>
                        <div class="flex items-center text-xs text-gray-500 mb-3">
                            <span class="mr-2"><i class="fa fa-calendar-o mr-1"></i>${book.year}</span>
                            <span><i class="fa fa-file-text-o mr-1"></i>${getFormatName(book.fileType)}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <button class="text-primary hover:text-secondary transition-colors text-sm font-medium" onclick="openBook(${book.id})">
                                阅读 <i class="fa fa-arrow-right ml-1"></i>
                            </button>
                            <div class="flex space-x-1">
                                <button class="text-gray-400 hover:text-primary transition-colors" onclick="showEditBook(${book.id})">
                                    <i class="fa fa-pencil"></i>
                                </button>
                                <button class="text-gray-400 hover:text-red-500 transition-colors" onclick="deleteBook(${book.id})">
                                    <i class="fa fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                booksGrid.appendChild(bookCard);
            });
        }

        // 显示排序选项
        function showSortOptions() {
            showModal(
                '排序图书',
                `
                    <div class="space-y-3">
                        <label class="flex items-center">
                            <input type="radio" name="sort" value="title" class="mr-2" checked>
                            <span>按书名排序</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="sort" value="author" class="mr-2">
                            <span>按作者排序</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="sort" value="category" class="mr-2">
                            <span>按分类排序</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="sort" value="year" class="mr-2">
                            <span>按年份排序</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="sort" value="uploadDate" class="mr-2">
                            <span>按上传日期排序</span>
                        </label>
                        <div class="flex items-center">
                            <input type="checkbox" id="sort-desc" class="mr-2">
                            <label for="sort-desc">降序排列</label>
                        </div>
                    </div>
                `,
                () => {
                    const sortBy = document.querySelector('input[name="sort"]:checked').value;
                    const isDesc = document.getElementById('sort-desc').checked;
                    
                    // 排序图书
                    appState.books.sort((a, b) => {
                        if (sortBy === 'title' || sortBy === 'author' || sortBy === 'category') {
                            return a[sortBy].localeCompare(b[sortBy]) * (isDesc ? -1 : 1);
                        } else if (sortBy === 'year' || sortBy === 'uploadDate') {
                            return (parseInt(a[sortBy]) - parseInt(b[sortBy])) * (isDesc ? -1 : 1);
                        }
                        return 0;
                    });
                    
                    renderBooks();
                    showNotification('info', '排序完成', `图书已按${getSortLabel(sortBy)}${isDesc ? '降序' : '升序'}排列`);
                }
            );
        }

        // 获取排序标签
        function getSortLabel(sortBy) {
            const labels = {
                'title': '书名',
                'author': '作者',
                'category': '分类',
                'year': '年份',
                'uploadDate': '上传日期'
            };
            return labels[sortBy] || sortBy;
        }

        // 显示过滤选项
        function showFilterOptions() {
            showModal(
                '过滤图书',
                `
                    <div class="space-y-3">
                        <label class="block text-sm font-medium text-gray-700 mb-1">按分类过滤</label>
                        <div class="grid grid-cols-2 gap-2">
                            <label class="flex items-center">
                                <input type="checkbox" name="category" value="文学" class="mr-2">
                                <span>文学</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="category" value="科学" class="mr-2">
                                <span>科学</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="category" value="技术" class="mr-2">
                                <span>技术</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="category" value="历史" class="mr-2">
                                <span>历史</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="category" value="哲学" class="mr-2">
                                <span>哲学</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="category" value="艺术" class="mr-2">
                                <span>艺术</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="category" value="其他" class="mr-2">
                                <span>其他</span>
                            </label>
                        </div>
                        
                        <div class="pt-2">
                            <label class="block text-sm font-medium text-gray-700 mb-1">按年份过滤</label>
                            <div class="flex items-center space-x-2">
                                <input type="number" id="filter-year-from" placeholder="从" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary">
                                <span class="text-gray-500">到</span>
                                <input type="number" id="filter-year-to" placeholder="到" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary">
                            </div>
                        </div>
                    </div>
                `,
                () => {
                    // 这里只是演示，实际应用中应该实现过滤逻辑
                    showNotification('info', '过滤功能', '过滤功能将在未来版本中实现');
                }
            );
        }

        // 加载更多图书
        function loadMoreBooks() {
            // 这里只是演示，实际应用中应该实现加载更多逻辑
            showNotification('info', '加载完成', '已加载所有图书');
        }

        // 显示编辑图书模态框
        function showEditBook(bookId) {
            const book = appState.books.find(b => b.id === bookId);
            if (!book) return;
            
            showModal(
                `编辑《${book.title}》`,
                `
                    <div class="space-y-4">
                        <div>
                            <label for="edit-title" class="block text-sm font-medium text-gray-700 mb-1">书名</label>
                            <input type="text" id="edit-title" value="${book.title}" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary/50 focus:border-primary">
                        </div>
                        <div>
                            <label for="edit-author" class="block text-sm font-medium text-gray-700 mb-1">作者</label>
                            <input type="text" id="edit-author" value="${book.author}" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary/50 focus:border-primary">
                        </div>
                        <div>
                            <label for="edit-category" class="block text-sm font-medium text-gray-700 mb-1">分类</label>
                            <select id="edit-category" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary/50 focus:border-primary">
                                <option value="文学" ${book.category === '文学' ? 'selected' : ''}>文学</option>
                                <option value="科学" ${book.category === '科学' ? 'selected' : ''}>科学</option>
                                <option value="技术" ${book.category === '技术' ? 'selected' : ''}>技术</option>
                                <option value="历史" ${book.category === '历史' ? 'selected' : ''}>历史</option>
                                <option value="哲学" ${book.category === '哲学' ? 'selected' : ''}>哲学</option>
                                <option value="艺术" ${book.category === '艺术' ? 'selected' : ''}>艺术</option>
                                <option value="其他" ${book.category === '其他' ? 'selected' : ''}>其他</option>
                            </select>
                        </div>
                        <div>
                            <label for="edit-year" class="block text-sm font-medium text-gray-700 mb-1">出版年份</label>
                            <input type="number" id="edit-year" value="${book.year || ''}" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary/50 focus:border-primary">
                        </div>
                        <div>
                            <label for="edit-description" class="block text-sm font-medium text-gray-700 mb-1">简介</label>
                            <textarea id="edit-description" rows="3" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary/50 focus:border-primary">${book.description || ''}</textarea>
                        </div>
                    </div>
                `,
                () => {
                    // 更新图书信息
                    book.title = document.getElementById('edit-title').value.trim();
                    book.author = document.getElementById('edit-author').value.trim();
                    book.category = document.getElementById('edit-category').value;
                    book.year = document.getElementById('edit-year').value;
                    book.description = document.getElementById('edit-description').value.trim();
                    
                    renderBooks();
                    showNotification('success', '更新成功', `《${book.title}》的信息已更新`);
                }
            );
        }

        // 删除图书
        function deleteBook(bookId) {
            const book = appState.books.find(b => b.id === bookId);
            if (!book) return;
            
            showModal(
                '删除图书',
                `
                    <p class="mb-4">您确定要删除《${book.title}》吗？此操作无法撤销。</p>
                    <p class="text-red-500 text-sm">注意：这将永久删除该图书及其所有相关数据。</p>
                `,
                () => {
                    // 从数组中删除图书
                    appState.books = appState.books.filter(b => b.id !== bookId);
                    
                    // 删除图书内容和目录
                    delete appState.bookContents[bookId];
                    delete appState.tableOfContents[bookId];
                    
                    // 重新渲染图书列表
                    renderBooks();
                    
                    showNotification('info', '删除成功', `《${book.title}》已从您的图书馆中删除`);
                }
            );
        }

        // 显示上传帮助
        function showUploadHelp() {
            showModal(
                '上传帮助',
                `
                    <div class="space-y-4">
                        <div>
                            <h3 class="font-medium text-gray-800">如何上传图书？</h3>
                            <p class="text-gray-600">您可以上传 PDF、EPUB、MOBI 或 TXT 格式的电子书。点击"浏览文件"按钮选择您的电子书文件，或直接拖放文件到指定区域。</p>
                        </div>
                        <div>
                            <h3 class="font-medium text-gray-800">需要填写哪些信息？</h3>
                            <p class="text-gray-600">必填字段包括书名和作者。其他字段如分类、出版年份和简介是可选的，但填写完整信息将帮助您更好地管理和查找图书。</p>
                        </div>
                        <div>
                            <h3 class="font-medium text-gray-800">封面图片从哪里来？</h3>
                            <p class="text-gray-600">系统会自动为您的图书生成封面图片。您也可以在编辑图书信息时更换封面图片。</p>
                        </div>
                        <div>
                            <h3 class="font-medium text-gray-800">上传后可以做什么？</h3>
                            <p class="text-gray-600">上传成功后，您可以在图书馆中查看、阅读、编辑或删除您的图书。您还可以添加书签、调整阅读设置等。</p>
                        </div>
                    </div>
                `
            );
        }

        // 显示模态框
        function showModal(title, content, confirmCallback = null) {
            modalTitle.textContent = title;
            modalBody.innerHTML = content;
            
            // 如果没有提供确认回调，则隐藏确认按钮
            if (!confirmCallback) {
                modalConfirmBtn.classList.add('hidden');
            } else {
                modalConfirmBtn.classList.remove('hidden');
                modalConfirmBtn.onclick = () => {
                    confirmCallback();
                    closeModalDialog();
                };
            }
            
            // 显示模态框
            modal.classList.remove('hidden');
            setTimeout(() => {
                modalContent.classList.remove('scale-95', 'opacity-0');
                modalContent.classList.add('scale-100', 'opacity-100');
            }, 10);
        }

        // 关闭模态框
        function closeModalDialog() {
            modalContent.classList.remove('scale-100', 'opacity-100');
            modalContent.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }

        // 显示通知
        function showNotification(type, title, message) {
            // 设置通知内容
            notificationTitle.textContent = title;
            notificationMessage.textContent = message;
            
            // 设置通知图标和样式
            if (type === 'success') {
                notificationIcon.className = 'fa fa-check-circle text-green-500';
                notification.classList.remove('border-red-500', 'border-yellow-500', 'border-blue-500');
                notification.classList.add('border-green-500');
            } else if (type === 'error') {
                notificationIcon.className = 'fa fa-exclamation-circle text-red-500';
                notification.classList.remove('border-green-500', 'border-yellow-500', 'border-blue-500');
                notification.classList.add('border-red-500');
            } else if (type === 'warning') {
                notificationIcon.className = 'fa fa-exclamation-triangle text-yellow-500';
                notification.classList.remove('border-green-500', 'border-red-500', 'border-blue-500');
                notification.classList.add('border-yellow-500');
            } else if (type === 'info') {
                notificationIcon.className = 'fa fa-info-circle text-blue-500';
                notification.classList.remove('border-green-500', 'border-red-500', 'border-yellow-500');
                notification.classList.add('border-blue-500');
            }
            
            // 显示通知
            notification.classList.remove('translate-x-full');
            
            // 3秒后自动隐藏
            setTimeout(hideNotification, 3000);
        }

        // 隐藏通知
        function hideNotification() {
            notification.classList.add('translate-x-full');
        }

        // 切换移动菜单
        function toggleMobileMenu() {
            mobileMenu.classList.toggle('hidden');
        }

        // 处理滚动
        function handleScroll() {
            if (window.scrollY > 10) {
                mainNav.classList.add('py-2');
                mainNav.classList.remove('py-3');
            } else {
                mainNav.classList.add('py-3');
                mainNav.classList.remove('py-2');
            }
        }

        // 初始化应用
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
    
